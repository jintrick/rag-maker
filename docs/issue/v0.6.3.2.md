# Issue v0.6.3.2

## 前提知識
- src/ragmaker/tools/ask_dir.py
- src/ragmaker/tools/install_kb.py
- .gemini/skills/rag-installer/SKILL.md

## 経緯
v0.6.3.1 の実装において、`ragmaker-ask-dir` の `--initial-dir` オプションが正常に機能せず、初期ディレクトリが期待通り（プロジェクトルート）に開かない問題が報告された。また、`ragmaker-install-kb` においても、指定したターゲットディレクトリの直下にファイルが展開されてしまい、フォルダ構造が維持されないバグが確認された。

## 現状の問題点
- **UIの不備**: `ask_dir.py` において、`initialdir` に渡すパスの正規化が不十分なため、OS（特に Windows）側で無視されている。
- **配置ロジックのバグ**: `install_kb.py` において、ターゲットディレクトリが存在する場合にソースフォルダ名を用いたサブディレクトリ作成が正しく行われていない。

## ゴール（完了の定義）
- [x] `ragmaker-ask-dir --initial-dir .` を実行した際、確実に現在のプロジェクトルートが初期位置として開く。
- [x] `ragmaker-install-kb` を実行した際、ターゲットがディレクトリであれば、その中にソースフォルダ名でサブディレクトリが作成され、そこにインストールされる。
- [x] スキル（SKILL.md）がこれらの修正されたツールを正しく呼び出し、期待通りの動作を完遂する。

## 解決策の詳細
1. **`ask_dir.py`**: 
   - `initial_dir` を `os.path.normpath(os.path.abspath(os.getcwd()))` を用いて、プログラム実行時のカレントディレクトリとして絶対パス化する。
2. **`install_kb.py`**:
   - `target_root` の再計算ロジックを、パスの末尾のスラッシュや形式に依存しないよう、`Path` オブジェクトの操作として厳格に実装し直す。
3. **`SKILL.md`**:
   - ツールへの引数渡しを、修正された仕様に沿って最適化する。

## テスト方法
- [x] `ragmaker-ask-dir --initial-dir .` の動作目視確認。
- [x] `ragmaker-install-kb` のターゲットディレクトリ自動作成機能の再検証。