- .gemini/commands/ask.toml

## 経緯
プロジェクトのツールが増えるにつれて、現在のフラットな `tools/` ディレクトリ構造では管理が煩雑になってきました。また、各ツールは単なるPythonスクリプトとして存在しており、プロジェクト全体の依存関係や配布形式が定義されていません。
このままではスケーラビリティとメンテナンス性に問題が生じるため、プロジェクトを本格的なPythonパッケージとして再構築する必要があります。

## 現状の問題点
1.  **見通しの悪さ**: `tools/` ディレクトリに多数のスクリプトが混在しており、目的のツールや関連ユーティリティを見つけにくい。
2.  **依存関係の不明確さ**: プロジェクトがどのライブラリに依存しているかが `requirements.txt` などで明示的に管理されておらず、環境構築が煩雑になっている。
3.  **移植性の欠如**: ツールを実行するには、常にプロジェクトのルートディレクトリから相対パスでスクリプトを指定する必要があり、移植性や再利用性が低い。


## 解決策の概要
プロジェクト構造をPythonの標準的なパッケージレイアウトである `src` レイアウトに移行します。
`pyproject.toml` を導入してプロジェクトのメタデータと依存関係を定義し、各ツールを `console_scripts` エントリポイントとして登録します。
これにより、`pip install -e .` でプロジェクトを開発モードでインストール可能にし、ツールを `ragmaker-` プレフィックス付きのコマンドとしてシステム全体から呼び出せるようにします。

## 解決策の詳細
1.  **ディレクトリ構造の変更**:
    -   `src/ragmaker/` ディレクトリを新規作成します。
    -   既存の `tools/` ディレクトリを `src/ragmaker/tools/` に移動します。
    -   既存の `utils.py` を `src/ragmaker/utils.py` に移動します。
    -   各ディレクトリに `__init__.py` を配置し、Pythonパッケージとして認識させます。

2.  **`pyproject.toml` の新規作成**:
    -   プロジェクトルートに `pyproject.toml` を作成します。
    -   `[project]` テーブルに、プロジェクト名 (`rag-maker`)、バージョン、説明などのメタデータを定義します。
    -   `dependencies` に、`requests`, `beautifulsoup4`, `GitPython` などの依存ライブラリをリストアップします。
    -   `[project.scripts]` テーブルに、各ツールをコマンドとして登録します。
        ```toml
        [project.scripts]
        ragmaker-http-fetch = "ragmaker.tools.http_fetch:main"
        ragmaker-github-fetch = "ragmaker.tools.github_fetch:main"
        ragmaker-create-knowledge-base = "ragmaker.tools.create_knowledge_base:main"
        # ... 他のすべてのツールを同様に登録
        ```

3.  **`discovery.json` の更新**:
    -   プロジェクトルートの `discovery.json` を開き、`tools` 配列内の各ツール定義を修正します。
    -   `path` の値を、古いスクリプトパス (`tools/http_fetch.py`) から、新しいコマンド名 (`ragmaker-http-fetch`) に変更します。

4.  **インポートパスの修正**:
    -   `github_fetch.py` や `http_fetch.py` など、`from utils import ...` を使用しているスクリプトのインポート文を、`from ragmaker.utils import ...` のように絶対インポートに修正します。

## 参考とすべきスクリプト等
- `tools/` ディレクトリ内の全スクリプト (移動・修正対象)
- `utils.py` (移動・修正対象)
- `discovery.json` (修正対象)

## テスト方法
1.  `pip install -e .` を実行し、プロジェクトが正常にインストールされ、`ragmaker-` で始まるコマンドが利用可能になることを確認します。
2.  `ragmaker-http-fetch --help` のように、いずれかのツールをコマンドとして直接実行し、正常に動作することを確認します。
3.  既存の単体テスト（`test/` ディレクトリ配下）をすべて実行し、パスすることを確認します。インポートパスの変更に伴い、テストコードの修正が必要になる場合があります。
4.  `/rag` コマンドを実行し、AIエージェントが新しいコマンド名 (`ragmaker-http-fetch` など) を使ってツールを正しく呼び出し、ワークフロー全体が正常に完了することを確認します。

## 実装状況


