# Issue v0.6.1.4: github_fetch.py のクローン失敗時のエラーハンドリング精密化

## 前提知識
- docs/issue/v0.6.1.3.md
- src/ragmaker/tools/github_fetch.py

## 用語の定義
- **シャロークローン**: `--depth 1` を指定した、履歴を制限した軽量なクローン。
- **フルクローン**: すべての履歴を取得する通常のクローン。

## 経緯
Issue v0.6.1.3 において、`github_fetch.py` にシャロークローン失敗時のフルクローンへのフォールバックを導入した。現在の実装では、フルクローンも失敗した場合に上位へ例外がそのまま伝播するため、エラーの経緯（どちらの試行も失敗したこと）が不明瞭である。これを精密化し、デバッグの容易性とユーザーへのフィードバックを改善する。

## 現状の問題点
- フルクローン失敗時に、シャロークローンからの一連の試行が失敗したという文脈がエラーメッセージから欠落する。
- 例外が未加工のまま伝播するため、最終的なエラー原因を特定しにくい。

## ゴール（完了の定義）
実装担当者は、完了報告前に以下の項目をすべて確認し、チェックを入れ、この文書を更新してcommitすること。
- [x] `src/ragmaker/tools/github_fetch.py` において、フルクローン失敗時に試行の経緯を包含した `RuntimeError` が送出されている。
- [x] `pytest test/test_github_fetch.py` を実行し、既存の全テストケースがパスしている。

## 解決策の概要
クローンのフォールバック処理において、2度目の試行（フルクローン）を `try...except` で囲む。失敗時には `raise ... from` 構文を用いて、先行する失敗の文脈を維持しつつ、具体的なエラーメッセージを持つ `RuntimeError` を送出する。

## 解決策の詳細
`src/ragmaker/tools/github_fetch.py` の `github_fetch` 関数内にあるクローン処理を以下のように修正する。
```python
        try:
            Repo.clone_from(repo_url, clone_dir, **kwargs)
        except Exception as e:
            logger.warning(f"Shallow clone failed, retrying full clone: {e}")
            if "depth" in kwargs:
                del kwargs["depth"]
            try:
                Repo.clone_from(repo_url, clone_dir, **kwargs)
            except Exception as final_exception:
                # シャロークローン後のフルクローンも失敗したことを明記
                raise RuntimeError("Full clone also failed after shallow clone attempt.") from final_exception
```

## 参考とすべきスクリプト等
- docs/issue/v0.6.1.3.md

## テスト方法
実装担当者は、完了報告前に以下の項目をすべて確認し、チェックを入れ、この文書を更新してcommitすること。
- [x] `pytest test/test_github_fetch.py` を実行し、正常なクローン動作に影響がないことを確認した。
- [x] 存在しないリポジトリURLを指定する等の方法で、意図的にクローンを失敗させ、期待通りのエラーメッセージと例外チェーンが出力されることを確認した。

## 実装状況
実装担当者は、完了報告前に以下の項目をすべて確認し、チェックを入れ、この文書を更新してcommitすること。
- [x] v0.6.1.4 起草
- [x] クローンエラーハンドリングの精密化完了
- [x] 最終確認完了
