# Issue v0.4.2.1: アーキテクチャの抜本的改善 - ツール定義とドキュメント定義の完全分離

## 関連イシュー
- `docs/issue/v0.4.2.md` (このイシューによって廃止)

## 前提知識
- `docs/Architecture/Architecture.md`
- `tools/create_knowledge_base.py`

## 経緯
`v0.4.2`の議論の過程で、現在のアーキテクチャが抱える根本的な問題が明らかになりました。当初の計画では、新しいナレッジベースを作成する際に、プロジェクトのツール定義を各ナレッジベースの`discovery.json`にコピー（引き継ぎ）する仕様でした。

しかし、この設計は大きな欠陥を抱えています。

## 問題点
ツール定義が各ナレッジベースに分散してコピーされる設計は、以下の深刻な問題を引き起こします。

1.  **メンテナンス性の破綻**:
    `rag-maker`プロジェクト本体でツールを一つ追加・修正するたびに、**過去に作成したすべてのナレッジベースの`discovery.json`を手動で更新する必要があり**、これは非現実的でスケールしません。

2.  **責務の混同**:
    「ツールカタログ」と「ドキュメントカタログ」という全く異なる責務を一つのファイルに混在させるべきではありません。ツールはプロジェクトの**機能**であり、ナレッジベースは**データ**です。この2つは明確に分離されるべきです。

## 解決策の概要
アーキテクチャを抜本的に見直し、ツール定義とドキュメント定義を完全に分離します。

- **ツール定義の一元化**: ツール定義は、常に**プロジェクトルートの `discovery.json`** にのみ存在させます。これを唯一の「マスターツールカタログ」とします。AIエージェントはツールを利用する際、常にこのファイルを参照します。
- **ナレッジベースの役割の特化**: 各ナレッジベースの `discovery.json` は、**ドキュメントカタログ専用**とし、`documents` 配列のみを管理します。ツール定義（`tools`, `handles`）は一切含みません。

## 解決策の詳細
この新しいアーキテクチャを実現するため、以下のファイルを修正します。

1.  **`tools/create_knowledge_base.py` の修正**:
    - プロジェクトルートの `discovery.json` を読み込む処理を完全に削除します。
    - 代わりに、`{"documents": []}` という内容だけの、最小限の `discovery.json` を新しいナレッジベースのルートに**新規作成**します。

2.  **`docs/Architecture/Architecture.md` の更新**:
    - 「役割の異なる2つの `discovery.json`」のセクションを、この新しい設計思想に合わせて全面的に書き直します。ツール定義がプロジェクトルートに一元化され、ナレッジベースの `discovery.json` はドキュメント専用であることを明確に記述します。

## 参考とすべきスクリプト等
*   `tools/create_knowledge_base.py` (修正対象)
*   `test/test_create_knowledge_base.py` (テスト内容の修正が必要)
*   `docs/Architecture/Architecture.md` (アーキテクチャ定義の更新が必要)

## テスト方法
`test/test_create_knowledge_base.py` を更新し、以下の点を確認します。

1.  ツール実行後、ナレッジベースのルートに `discovery.json` が正しく生成されること。
2.  生成された `discovery.json` の内容が、`{"documents": []}` という最小限の構造であることをアサートで確認します。
3.  生成された `discovery.json` に、`tools` や `handles` といったキーが**含まれていない**ことをアサートで確認します。

## 実装状況
Jules、このイシューはプロジェクトの健全性にとって非常に重要です。上記の方針に従って、実装とテストの修正をお願いします。