# Issue v0.1.2: RAGデータベース問い合わせツールの実装

## 前提知識
- `docs/Architecture/Architecture.md`

## 現状の問題点
- `/ask` コマンドの機能実装にあたり、ユーザーの質問に関連するドキュメントチャンクをVector DBから取得するための具体的なツールが存在しない。
- `make_vector_db.py` はDBの作成のみを担当しており、問い合わせ機能は未実装である。

## 解決策の概要
- RAGデータベース（ChromaDB）に問い合わせを行い、関連性の高いドキュメントチャンクを取得するPythonスクリプト `query_vector_db.py` を作成する。
- このツールは、`/ask` コマンドのフロー内部で、LLMによって選択されたデータベースに対して使用されることを想定する。

## 解決策の詳細
`query_vector_db.py` は、以下の仕様を満たすツールとして実装される。

1.  **入力**:
    - `--db-path`: 問い合わせ対象のChromaDBが格納された `.chroma` ディレクトリへのパス。
    - `--query`: ユーザーからの質問（検索クエリ）。
2.  **DB読み込み**: 指定された `db-path` からChromaDBを読み込む。
3.  **埋め込みモデル**: `make_vector_db.py` と同じ埋め込みモデル（`HuggingFaceEmbeddings` with `all-MiniLM-L6-v2`）を使用して、入力された `query` をベクトル化する。
4.  **類似度検索**: ベクトル化されたクエリを用いて、ChromaDBに類似度検索（similarity search）を実行し、関連性の高い上位4つのドキュメントチャンクを取得する。
5.  **結果の出力**: 取得したドキュメントチャンクのリストを、JSON形式で標準出力に返す。各チャンクには、`page_content` と `metadata` を含める。
    ```json
    {
      "status": "success",
      "results": [
        {
          "page_content": "...",
          "metadata": { ... }
        },
        ...
      ]
    }
    ```

## 参考とすべきスクリプト等
- `make_vector_db.py`: エラーハンドリング、引数解析、JSON出力形式などの作法は、このスクリプトを踏襲すること。

## テスト方法
`query_vector_db.py` の機能が正しく動作することを確認するため、以下のテストを実施する。

1.  **前提**: `make_vector_db.py` を使って、テスト用のRAGデータベース（例: `docs` ディレクトリをソースとするDB）を事前に構築しておく。
2.  **ツール実行**: `query_vector_db.py` を、構築済みのDBパスとテスト用の質問を引数として実行する。
    - 例: `python query_vector_db.py --db-path "docs/.chroma" --query "custom slash commands"`
3.  **出力確認**:
    - 標準出力に、`status: success` を含むJSONが返されることを確認する。
    - `results` 配列に、関連するテキストチャンクが4つ含まれていることを確認する。
