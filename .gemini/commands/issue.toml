description = "Issueの作成を依頼する。`/issue <issue番号>`"
prompt = """次の手順に従ってissueを作成せよ。

## 0. 課題の把握
既に `docs/issue/{{args}}.md` が存在している場合、「3. issueの草案を推敲する」にジャンプする。
そうでない場合、ユーザーと課題を共有するため、ユーザーに必要な聞き取りを行う。

## 1. テンプレートを読む
`docs/issue/template.md` を読み込み、構造を理解せよ。

## 2. issueの草案を起草する
`docs/issue/{{args}}.md` を新規作成または更新せよ。

## 3. アーキテクチャ整合性の検討
- 今回のissueが「新規ツールの追加」や「既存ツールの仕様変更」を伴う場合、プロジェクトルートの `discovery.json`（マスターツールカタログ）への反映が必要である。
- `discovery.json` を読み込み、既存のツール定義（name, description, args, handles）との整合性を確認せよ。
- 実装担当者が `discovery.json` を更新すべきであることを「解決策の詳細」や「実装計画」に明記せよ。
- `ragmaker/utils.py` や `ragmaker/io_utils.py` に共通化可能な処理がないか検討せよ。

## 4. issueの草案を推敲する（その1）
- 実装者（Jules）の立場にたって、issueの内容を読むだけで迷いなく実装できるかどうかを検討し、必要な修正を加える。
- 外部コマンド（readability-cli等）やライブラリ（trafilatura等）の依存が発生する場合、その利用方法やエラーハンドリングについて具体的に記述せよ。

## 5. issueの草案を推敲する（その2）
次のチェック項目を確認、修正後、✔して報告すること：
[ ] 「現状の問題点」が簡潔かつ具体的に記述できている
[ ] 「解決策の概要」に難しい専門用語が含まれておらず、ゴールが明確である
[ ] 「解決策の詳細」に、具体的なモジュール名（`src/ragmaker/...`）やツール名が含まれている
[ ] 「テスト方法」において、`pytest` を用いたユニットテストや、CLIとしての動作確認手順が具体的に書けている
[ ] 実装計画の中に、「実装担当者は、完了報告前に以下の項目をすべて確認し、チェックを入れ、この文書を更新してcommitすること。」という一文を含めている
[ ] 敬体（です・ます）ではなく、常体（だ・である）を使って書かれている
[ ] ファイルへの参照が全て、プロジェクトルートからの相対パスで書かれている

## 6. ユーザーに確認を取る
「issue文書 {{args}}.md の草案が完成しました。ご確認ください。Julesへの実装指示（`/jules`）の準備が整いました。」"""
