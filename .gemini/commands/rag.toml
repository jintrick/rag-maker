description = "指定されたソースからRAGナレッジベースを構築し、システムに登録します。また、任意で外部ディレクトリに結果をコピーします。"
prompt = """
ソース（`{{args}}`）をナレッジソースとして取り込みます。
ワークフローに従い、以下のタスクを完了させてください。

### ソースタイプ毎の処理フロー
ソースの種別に応じて、以下のいずれかのフローを実行してください。ツールの発見には`discovery.json`を使うことができます。

#### **A) ソースが GitHubリポジトリ の場合**
1.  **キャッシュディレクトリ準備:** `cache/<リポジトリオーナー名>/<リポジトリ名>/` の規則でキャッシュディレクトリ名を決定し、準備してください。
2.  **フェッチ:** `github_fetch`ツールを実行します。`--temp-dir` に上記パスを指定して実行してください。

#### **B) ソースが Webページ の場合**
1.  **キャッシュディレクトリ準備:** `cache/<ドメイン名>/` の規則でキャッシュディレクトリ名を決定し、準備してください。
2.  **フェッチ:** `http_fetch`ツールを実行します。 `--temp-dir` に上記パスを指定して実行してください。

#### **C) ソースが ローカルディレクトリ の場合**
1.  **キャッシュディレクトリ準備:** `cache/<元のディレクトリ名>` のような規則でキャッシュディレクトリ名を決定し、準備してください。
2.  **ファイルコピー:** `file_sync`ツールを実行します。`--source-dir`にソースを、`--dest-dir`に上記のキャッシュディレクトリを指定してください。


### 共通の最終ステップ
フローが完了した後、以下の共通ステップを実行してください。
1.  **Markdown変換:** `html_to_markdown` を実行し、`--input-dir`および `--output-dir`にキャッシュディレクトリのパスを指定してください。
2.  **エンリッチ:** キャッシュディレクトリ内の`discovery.json`を完成させます。キャッシュディレクトリ内の文書を順次読み込み、`title` と `summary` 埋めて完成させてください。
3.  **システムへの登録:**
    - `entry_discovery`ツール(**未実装**)を実行します。
    - `--path`には、各フローで確定した「キャッシュディレクトリのパス」を登録してください。
    - `--title`に文書群全体を表すタイトルを指定します。
    - `--summary`
4.  ユーザーに登録完了を告げ、登録した文書の内容に関して何か質問をうながします。
"""